{"version":3,"sources":["webpack:///./src/canvas.vue?3592","webpack:///src/canvas.vue","webpack:///./src/canvas.vue?4cc9","webpack:///./src/canvas.vue","webpack:///src/App.vue","webpack:///./src/App.vue?0163","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?90d3"],"names":["module","exports","icon","icon-image","icon-upload","icon-hexagon","icon-return","icon-return-2","icon-font","icon-drawing","icon-brightness","icon-contrast","icon-arrow","icon-airplane","icon-success","icon-angle","icon-round","icon-delete","icon-add","icon-setting","canvas","canvas_waper","upload","file_input","upload_text","range_warper","icon_center","button_warper","popup","components","_components","defineProperty_default","button_default","a","name","range_default","popup_default","field_default","radio_default","data","ctx","hammertime","dx","dy","dWidth","dHeight","width","height","load","image","Image","scale","canText","brightness","invert","contrast","noPan","deg","text","fontColor","deltaY","deltaX","fontSize","showPopup","colorS","label","value","methods","drawImage","noDelta","arguments","length","undefined","this","x","y","save","clearRect","translate","rotate","Math","PI","filter","restore","textAlign","fillStyle","font","fillText","changeBrightness","initCanvas","_this","$nextTick","$refs","getContext","canvasClip","initHammer","fileData","e","src","URL","createObjectURL","target","files","error","console","log","_this2","window","requestAnimationFrame","hammer_default","Manager","add","Pan","direction","DIRECTION_ALL","threshold","Pinch","enable","on","panLisener","panEnd","pinchIn","pinchOut","beginPath","arc","clip","initCanvasImage","imageOnload","_this3","addEventListener","additionalEvent","getText","fetchImage","_this4","asyncToGenerator_default","regenerator_default","mark","_callee2","formData","wrap","_context2","prev","next","FormData","toBlob","_ref","_callee","blob","res","_context","append","Date","now","fetch","method","body","mode","sent","stop","_x2","apply","addText","closePopup","created","computed","canDr","watch","selectortype_template_index_0_src_canvas","render","_vm","_h","$createElement","_c","_self","class","$style","waper","attrs","position","model","callback","$$v","expression","placeholder","type","rows","_v","min","max","step","slot","title","options","size","click","ref","_e","id","accept","change","disabled","staticRenderFns","App","xCanvas","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","app","src_App","App_normalizeComponent","vue_runtime_esm","config","productionTip","el","h"],"mappings":"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","file":"static/js/app.b61f84eb6623099c03d6.js","sourcesContent":["// removed by extract-text-webpack-plugin\nmodule.exports = {\"icon\":\"_2cUV5VylbTfV8iyrK7c-Z5_0\",\"icon-image\":\"_3mgboV-L-Or37JoKOYZLkS_0\",\"icon-upload\":\"_3YhtKRy03ZAsceuz4NQYpW_0\",\"icon-hexagon\":\"_3IEx3Zn9g7RH20Zpe6xwcw_0\",\"icon-return\":\"CairNORpzmOPY4sIn4TcJ_0\",\"icon-return-2\":\"_3EAS5pLp8pGxx5OCcBRSdc_0\",\"icon-font\":\"_3grgwOxc6FHnMDXyY_T775_0\",\"icon-drawing\":\"VC-ad-sNYipI-PYNHyfr6_0\",\"icon-brightness\":\"_1hsRE7HYHv_iJfGE2W_Lhj_0\",\"icon-contrast\":\"_3lgTk0Q-VKe1diPHFk3fPH_0\",\"icon-arrow\":\"efowlHGcx-jaI3dGQ08rr_0\",\"icon-airplane\":\"SDICAyw3aS204-chq6q3L_0\",\"icon-success\":\"_3ow9gV-_2TpaWEpu3GaUxT_0\",\"icon-angle\":\"Ig_3WSDDfxrGybBHwPajI_0\",\"icon-round\":\"_2mlrr4_EY1atjWXD_qTXCW_0\",\"icon-delete\":\"_1qipPwZlbCtpLUOJhqI2pd_0\",\"icon-add\":\"_21u87CxTcLxlBeKG8IQKF8_0\",\"icon-setting\":\"_3MuNciJ16TV_uQqmnGxPBz_0\",\"canvas\":\"_7sg5ukifasfdchVvc_Psp_0\",\"canvas_waper\":\"_1bOFcbBevg4IhEJOTSGh0c_0\",\"upload\":\"_3GD6A9jmO7N4mAX3lgwXcl_0\",\"file_input\":\"_1nb7TTjs7JXZtCuKayIloc_0\",\"upload_text\":\"_45Ef97zl7u-t_d5lc9o3M_0\",\"range_warper\":\"_1-4SKiAaa0f-PJ6UizJT98_0\",\"icon_center\":\"_q1ePBc7-TsFv392R6Oc0_0\",\"button_warper\":\"lN46uXxFzAZE1BZddeWUo_0\",\"popup\":\"dOAsZq4qpA6cTj4vz5QQm_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[hash:base64]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-838e5380\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/canvas.vue\n// module id = Coyv\n// module chunks = 1","<template>\n  <div :class=\"$style.waper\">\n    <mt-popup v-model=\"showPopup\" position=\"right\" :class=\"$style.popup\">\n      <mt-field label=\"文字\" placeholder=\"请添加文字\" type=\"textarea\" rows=\"2\" v-model=\"text\"></mt-field>\n      <mt-range\n        v-model=\"fontSize\"\n        :min=\"10\"\n        :max=\"40\"\n        :step=\"1\"\n        value=\"20\">\n        <div slot=\"start\" :class=\"[$style.icon_center]\">字体大小</div>\n      </mt-range>\n      <mt-radio\n        title=\"字体颜色\"\n        v-model=\"fontColor\"\n        :options=\"colorS\">\n      </mt-radio>\n      <mt-button @click=\"closePopup\" type=\"primary\" size=\"large\">确定</mt-button>\n    </mt-popup>\n    <div :class=\"$style.canvas_waper\">\n      <canvas ref=\"canvas\" width=\"300px\" height=\"300px\" :class=\"$style.canvas\"></canvas>\n      <div :class=\"[$style.upload, $style['icon-upload'], $style.icon]\" v-if=\"!load\">\n        <span :class=\"$style.upload_text\">上传文件</span>\n        <input type=\"file\" name=\"image\" id=\"\" @change=\"fileData\" accept=\"image/*\"  :class=\"$style.file_input\">\n      </div>\n    </div>\n    <div v-if=\"!canText\">\n      <!-- <x-range :min=\"0.1\" :max=\"2\" :step=\"0.01\" @change=\"change\" :disabled=\"canDr\" tag=\"缩放\" key=\"1\"></x-range> -->\n      <mt-button @click=\"getText\" :disabled=\"canDr\" v-if=\"!canText\" type=\"primary\" size=\"large\">下一步</mt-button>\n    </div>\n    <div v-if=\"canText\" :class=\"$style.range_warper\">\n      <!-- <input type=\"text\" @input=\"setText\"/> -->\n      <!-- <x-range @change=\"changeR\" :min=\"-180\" :max=\"180\" :step=\"1\" :initValue=\"0\" tag=\"旋转\" key=\"2\"></x-range>\n      <x-range @change=\"changeInvert\" :min=\"0\" :max=\"100\" :step=\"1\" :initValue=\"0\" tag=\"反色\" key=\"3\"></x-range>\n      <x-range @change=\"changeBrightness\" :min=\"30\" :max=\"100\" :step=\"1\" tag=\"亮度\" :initValue=\"100\" key=\"4\"></x-range>\n      <x-range  @change=\"changeContrast\" :min=\"0\" :max=\"100\" :step=\"1\" :initValue=\"100\" tag=\"对比度\" key=\"5\"></x-range> -->\n      <mt-range\n        v-model=\"deg\"\n        :min=\"-180\"\n        :max=\"180\"\n        :step=\"1\">\n        <div slot=\"start\"><i :class=\"[$style.icon, $style['icon-angle'], $style.icon_center]\"></i></div>\n      </mt-range>\n      <mt-range\n        v-model=\"brightness\"\n        :min=\"30\"\n        :max=\"200\"\n        :step=\"1\"\n        value=\"100\">\n        <div slot=\"start\"><i :class=\"[$style.icon, $style['icon-brightness'], $style.icon_center]\"></i></div>\n      </mt-range>\n      <mt-range\n        v-model=\"contrast\"\n        :min=\"0\"\n        :max=\"200\"\n        :step=\"1\"\n        value=\"100\">\n        <div slot=\"start\"><i :class=\"[$style.icon, $style['icon-contrast'], $style.icon_center]\"></i></div>\n      </mt-range>\n      <div :class=\"$style.button_warper\">\n        <mt-button @click=\"addText\" type=\"primary\">添加文字</mt-button>\n        <mt-button @click=\"fetchImage\" type=\"primary\">上传图片</mt-button>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport Hammer from 'hammerjs'\nimport { Button, Range, Popup, Field, Radio } from 'mint-ui'\nexport default {\n  components: {\n    [Button.name]: Button,\n    [Range.name]: Range,\n    [Popup.name]: Popup,\n    [Field.name]: Field,\n    [Radio.name]: Radio\n  },\n  name: 'x-canvas',\n  data () {\n    return {\n      canvas: null,\n      ctx: null,\n      hammertime: null,\n      dx: null,\n      dy: null,\n      dWidth: null,\n      dHeight: null,\n      width: null,\n      height: null,\n      load: false,\n      image: new Image(),\n      scale: 1,\n      canText: false,\n      brightness: 100,\n      invert: 0,\n      contrast: 100,\n      noPan: false,\n      deg: 0,\n      text: '',\n      fontColor: '#ffffff',\n      deltaY: 0,\n      deltaX: 0,\n      fontSize: 20,\n      showPopup: false,\n      colorS: [{\n        label: '红色',\n        value: 'red'\n      },\n      {\n        label: '白色',\n        value: '#ffffff'\n      },\n      {\n        label: '黑色',\n        value: 'black'\n      }]\n    }\n  },\n  methods: {\n    drawImage (noDelta = true) {\n      const scale = this.scale\n      const deg = this.deg\n      const x = this.canvas.width / 2 // 画布宽度的一半\n      const y = this.canvas.height / 2 // 画布高度的一半\n      if (noDelta) {\n        this.deltaX = this.deltaY = 0\n      }\n      // Rotate\n      this.ctx.save()\n      this.ctx.clearRect(0, 0, x * 2, y * 2) // 先清掉画布上的内容\n      this.ctx.translate(x, y) // 将绘图原点移到画布中点\n      this.ctx.rotate((Math.PI / 180) * deg) // 旋转角度\n      this.ctx.scale(scale, scale)\n      this.ctx.translate(-x, -y) // 将画布原点移动\n      // Filter\n      this.ctx.filter = `contrast(${this.contrast}%) brightness(${this.brightness}%) invert(${this.invert}%)`\n      // 绘制图片\n      this.ctx.drawImage(this.image, this.dx + this.deltaX, this.dy + this.deltaY, this.dWidth, this.dHeight)\n      this.ctx.restore()\n      this.ctx.save()\n      this.ctx.textAlign = 'center'\n      this.ctx.fillStyle = this.fontColor\n      this.ctx.font = `${this.fontSize}px bold serif`\n      this.ctx.fillText(this.text, x, y)\n      this.ctx.restore()\n      // Scale\n    },\n    changeBrightness (value) {\n      this.brightness = value\n      this.drawImage()\n    },\n    initCanvas () {\n      this.$nextTick(() => {\n        this.canvas = this.$refs.canvas\n        this.ctx = this.$refs.canvas.getContext('2d')\n        this.canvasClip()\n        this.initHammer()\n      })\n    },\n    fileData (e) {\n      try {\n        this.image.src = URL.createObjectURL(e.target.files[0])\n      } catch (error) {\n        console.log(error)\n      }\n    },\n    initHammer () {\n      let callBack = () => {\n        this.hammertime = new Hammer.Manager(this.$refs.canvas)\n        this.hammertime.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 0 }))\n        this.hammertime.add(new Hammer.Pinch({ enable: true }))\n        this.hammertime.on('pan', this.panLisener)\n        this.hammertime.on('panend', this.panEnd)\n        this.hammertime.on('pinchin', this.pinchIn)\n        this.hammertime.on('pinchout', this.pinchOut)\n      }\n      window.requestAnimationFrame(callBack)\n    },\n    panEnd (e) {\n      if (this.noPan) {\n        return\n      }\n      this.dx += e.deltaX\n      this.dy += e.deltaY\n    },\n    pinchIn (e) {\n      if (this.noPan) {\n        return\n      }\n      if (this.scale <= 0.3) {\n        return\n      }\n      this.scale -= 0.03\n      this.drawImage()\n    },\n    pinchOut (e) {\n      if (this.noPan) {\n        return\n      }\n      if (this.scale >= 2.5) {\n        return\n      }\n      this.scale += 0.03\n      this.drawImage()\n    },\n    canvasClip () {\n      this.ctx.beginPath()\n      this.ctx.arc(this.canvas.width / 2, this.canvas.height / 2, this.canvas.width / 2, 0, Math.PI * 2, true)\n      this.ctx.clip()\n    },\n    initCanvasImage () {\n      this.dx = this.canvas.width / 2 - this.image.width / 2\n      this.dy = this.canvas.height / 2 - this.image.height / 2\n      this.ctx.drawImage(this.image, this.dx, this.dy)\n      this.load = true\n    },\n    imageOnload () {\n      this.image.addEventListener('load', (e) => {\n        this.dWidth = this.width = this.image.width\n        this.dHeight = this.height = this.image.height\n        this.initCanvasImage()\n      }, false)\n    },\n    panLisener (e) {\n      if (this.noPan) {\n        return\n      }\n      if (e.additionalEvent) {\n        console.log(`deltaX`, e.deltaX)\n        console.log(`deltaY`, e.deltaY)\n        this.deltaX = e.deltaX\n        this.deltaY = e.deltaY\n        this.drawImage(false)\n      }\n    },\n    getText () {\n      this.canText = true\n      this.noPan = true\n    },\n    async fetchImage () {\n      const formData = new FormData()\n      this.canvas.toBlob(async (blob) => {\n        formData.append('image', blob, `$image-${Date.now()}.png`)\n        console.log(blob)\n        const res = await fetch('http://192.168.1.107:3000/', {\n          method: 'POST',\n          body: formData,\n          mode: 'no-cors'\n        })\n        console.log(res)\n      })\n    },\n    addText (e) {\n      this.showPopup = true\n    },\n    closePopup () {\n      this.showPopup = false\n      this.drawImage()\n    }\n  },\n  created () {\n    this.initCanvas()\n    this.imageOnload()\n  },\n  computed: {\n    canDr () {\n      if (this.canText) {\n        return true\n      }\n      return !this.load\n    }\n  },\n  watch: {\n    deg () {\n      this.drawImage()\n    },\n    brightness () {\n      this.drawImage()\n    },\n    contrast () {\n      this.drawImage()\n    }\n  }\n}\n</script>\n\n<style module>\n@import url(./assets/iconfont.css);\n.canvas{\n  display: block;\n  border: 1px solid #ccc;\n  border-radius: 50%;\n  margin: 0 auto;\n}\n.canvas_waper{\n  width: 100%;\n  position: relative;\n}\n.upload{\n  position: absolute;\n  width: 130px;\n  height: 130px;\n  left: calc(50% - 130px / 2);\n  bottom: calc(50% - 130px / 2);\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  cursor: pointer;\n  border: 1px #ccc;\n  border-style: dashed;\n}\n.file_input{\n  position: absolute;\n  opacity: 0;\n  width: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n}\n.upload_text{\n  display: block;\n}\n.range_warper{\n  padding: 0 10px;\n}\n.icon_center{\n  line-height: 30px;\n  margin: 0 10px 0 0;\n}\n.button_warper{\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-around;\n}\n.popup{\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  /* display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: space-around; */\n  padding: 10px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/canvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.waper},[_c('mt-popup',{class:_vm.$style.popup,attrs:{\"position\":\"right\"},model:{value:(_vm.showPopup),callback:function ($$v) {_vm.showPopup=$$v},expression:\"showPopup\"}},[_c('mt-field',{attrs:{\"label\":\"文字\",\"placeholder\":\"请添加文字\",\"type\":\"textarea\",\"rows\":\"2\"},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}),_vm._v(\" \"),_c('mt-range',{attrs:{\"min\":10,\"max\":40,\"step\":1,\"value\":\"20\"},model:{value:(_vm.fontSize),callback:function ($$v) {_vm.fontSize=$$v},expression:\"fontSize\"}},[_c('div',{class:[_vm.$style.icon_center],attrs:{\"slot\":\"start\"},slot:\"start\"},[_vm._v(\"字体大小\")])]),_vm._v(\" \"),_c('mt-radio',{attrs:{\"title\":\"字体颜色\",\"options\":_vm.colorS},model:{value:(_vm.fontColor),callback:function ($$v) {_vm.fontColor=$$v},expression:\"fontColor\"}}),_vm._v(\" \"),_c('mt-button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.closePopup}},[_vm._v(\"确定\")])],1),_vm._v(\" \"),_c('div',{class:_vm.$style.canvas_waper},[_c('canvas',{ref:\"canvas\",class:_vm.$style.canvas,attrs:{\"width\":\"300px\",\"height\":\"300px\"}}),_vm._v(\" \"),(!_vm.load)?_c('div',{class:[_vm.$style.upload, _vm.$style['icon-upload'], _vm.$style.icon]},[_c('span',{class:_vm.$style.upload_text},[_vm._v(\"上传文件\")]),_vm._v(\" \"),_c('input',{class:_vm.$style.file_input,attrs:{\"type\":\"file\",\"name\":\"image\",\"id\":\"\",\"accept\":\"image/*\"},on:{\"change\":_vm.fileData}})]):_vm._e()]),_vm._v(\" \"),(!_vm.canText)?_c('div',[(!_vm.canText)?_c('mt-button',{attrs:{\"disabled\":_vm.canDr,\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.getText}},[_vm._v(\"下一步\")]):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.canText)?_c('div',{class:_vm.$style.range_warper},[_c('mt-range',{attrs:{\"min\":-180,\"max\":180,\"step\":1},model:{value:(_vm.deg),callback:function ($$v) {_vm.deg=$$v},expression:\"deg\"}},[_c('div',{attrs:{\"slot\":\"start\"},slot:\"start\"},[_c('i',{class:[_vm.$style.icon, _vm.$style['icon-angle'], _vm.$style.icon_center]})])]),_vm._v(\" \"),_c('mt-range',{attrs:{\"min\":30,\"max\":200,\"step\":1,\"value\":\"100\"},model:{value:(_vm.brightness),callback:function ($$v) {_vm.brightness=$$v},expression:\"brightness\"}},[_c('div',{attrs:{\"slot\":\"start\"},slot:\"start\"},[_c('i',{class:[_vm.$style.icon, _vm.$style['icon-brightness'], _vm.$style.icon_center]})])]),_vm._v(\" \"),_c('mt-range',{attrs:{\"min\":0,\"max\":200,\"step\":1,\"value\":\"100\"},model:{value:(_vm.contrast),callback:function ($$v) {_vm.contrast=$$v},expression:\"contrast\"}},[_c('div',{attrs:{\"slot\":\"start\"},slot:\"start\"},[_c('i',{class:[_vm.$style.icon, _vm.$style['icon-contrast'], _vm.$style.icon_center]})])]),_vm._v(\" \"),_c('div',{class:_vm.$style.button_warper},[_c('mt-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addText}},[_vm._v(\"添加文字\")]),_vm._v(\" \"),_c('mt-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.fetchImage}},[_vm._v(\"上传图片\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-838e5380\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/canvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[hash:base64]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-838e5380\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./canvas.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./canvas.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./canvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-838e5380\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./canvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/canvas.vue\n// module id = null\n// module chunks = ","<template>\n  <div :class=\"$style.app\">\n    <x-canvas></x-canvas>\n  </div>\n</template>\n\n<script>\nimport xCanvas from './canvas'\n\nexport default {\n  components: {\n    xCanvas\n  },\n  name: 'app',\n  data () {\n    return {\n    }\n  }\n}\n</script>\n\n<style module>\n.app{\n  min-height: 100vh;\n  background: #ffffff;\n  overflow-x: hidden;\n}\n</style>\n<style>\n/* *{\n  box-sizing: border-box;\n} */\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.app},[_c('x-canvas')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0353aa2a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[hash:base64]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0353aa2a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0353aa2a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=1!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0353aa2a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport App from './App'\nimport './assets/reset.css'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"app\":\"_7GWKZZxRyNF89VUa_LE90_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[hash:base64]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0353aa2a\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/App.vue\n// module id = dj4J\n// module chunks = 1"],"sourceRoot":""}